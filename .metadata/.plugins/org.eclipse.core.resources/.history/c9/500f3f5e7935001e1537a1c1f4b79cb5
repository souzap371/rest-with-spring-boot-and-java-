package br.ufrn.imd.solicitacaurn.solus.repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;

import br.com.mkapi.solus.domain.Coparticipacao;

public interface CoparticipacaoRepository extends JpaRepository<Coparticipacao, Long>{
	
	@Query(value = "SELECT vw.* FROM vw_coparticipacao vw " +
	" WHERE chave_beneficiario = ?1", nativeQuery = true)
	public List<Coparticipacao> findAllByBeneficiario(Long chaveBeneficiario);
	
	@Query(value="select vw.* from vw_coparticipacao vw " + 
			"where vw.chave_beneficiario = ?1 and vw.competencia_cobranca = ?2 "
			,nativeQuery = true)
	public List<Coparticipacao> findByCompetencia(Long chaveBeneficiario, String competenciaCobranca);
	
	@Query(value="select distinct vw.competencia_cobranca from vw_coparticipacao vw " + 
			"where vw.chave_beneficiario = ?1 "
			,nativeQuery = true)
	public List<String> findCompetenciasByBeneficiario(Long chaveBeneficiario);

}
