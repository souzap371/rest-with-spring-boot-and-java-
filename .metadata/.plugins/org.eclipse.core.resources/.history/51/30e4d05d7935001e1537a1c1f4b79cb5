package br.ufrn.imd.solicitacaurn.mkdata.repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;

import br.com.mkapi.mkdata.domain.Paciente;

public interface PacienteRepositoryMkdata extends JpaRepository<Paciente, Long> {
	@Query(value = "SELECT p.* FROM PACIENTES p "
			+ "INNER JOIN PACIENTEXCARTOES p2 ON p.ID = p2.PACIENTE_ID "
			+ "WHERE p2.CARTAO = ?1 AND p.ativo ='S'", nativeQuery = true)
	public Paciente getIdPacienteByCodigoBeneficiario(String codigoBeneficiario);	

	@Query(value = "SELECT p2.CARTAO FROM PACIENTES p "
			+ "INNER JOIN PACIENTEXCARTOES p2 ON p.ID = p2.PACIENTE_ID "
			+ "WHERE p.ID = ?1 AND p.ativo ='S'", nativeQuery = true)
	public List<String> getCodigoBeneficiarioByIdPaciente(Long idPaciente);
}
