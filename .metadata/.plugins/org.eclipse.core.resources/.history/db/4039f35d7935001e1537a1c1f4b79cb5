package br.ufrn.imd.solicitacaurn.solus.controller;

import java.util.List;
import java.util.UUID;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;

import br.com.mkapi.solus.domain.AbstractEntity;
import br.com.mkapi.solus.domain.Boleto;
import br.com.mkapi.solus.repository.BoletoSolusRepository;

@Controller
@RequestMapping("/api/solus/boleto")
@CrossOrigin(origins = "*", allowedHeaders = "*")
public class BoletoSolusController extends AbstractController<AbstractEntity> {

	@Autowired
	private BoletoSolusRepository repository;

	@GetMapping("/{idBeneficiario}/getByBeneficiario")
	public ResponseEntity<List<Boleto>> getByBeneficiario(@PathVariable("idBeneficiario") Long idBeneficiario) {
		List<Boleto> boletos = repository.getByBeneficiario(idBeneficiario);
		return new ResponseEntity<>(boletos, HttpStatus.OK);
	}

	@GetMapping("/{idBeneficiario}/getOptionsByBeneficiario")
	public ResponseEntity<List<String>> getOptionsByBeneficiario(@PathVariable("idBeneficiario") Long idBeneficiario) {
		List<String> options = repository.getOptionsByBeneficiario(idBeneficiario);
		return new ResponseEntity<>(options, HttpStatus.OK);
	}

	@GetMapping("/{idBeneficiario}/{mesInicio}/{anoInicio}/{mesFim}/{anoFim}/getByBeneficiarioAndData")
	public ResponseEntity<List<Boleto>> getByBeneficiarioAndData(@PathVariable("idBeneficiario") Long idBeneficiario,
			@PathVariable("mesInicio") String mesInicio, @PathVariable("anoInicio") String anoInicio, @PathVariable("mesFim") String mesFim, @PathVariable("anoFim") String anoFim) {
		List<Boleto> boletos = repository.getByBeneficiarioAndData(idBeneficiario, mesInicio + "/" + anoInicio, mesFim + "/" + anoFim);
		return new ResponseEntity<>(boletos, HttpStatus.OK);
	}


	@Override
	protected JpaRepository<AbstractEntity, UUID> getRepository() {
		return null;
	}
}
